<mxfile host="app.diagrams.net" modified="2025-12-01T00:00:00.000Z" agent="5.0" etag="class-diagram-uml" version="21.1.1" type="device">
  <diagram name="Class Diagram - Standard UML" id="class-diagram-bw">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="SƠ ĐỒ CLASS UML - ỨNG DỤNG BÁN ĐỒNG HỒ E-COMMERCE&#xa;(Chuẩn UML 2.0 - Đen Trắng)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="50" as="geometry" />
        </mxCell>
        
        <!-- CLASS: User -->
        <mxCell id="user-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;User&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- email : VARCHAR(250)&lt;br&gt;- pass : VARCHAR(250)&lt;br&gt;- username : VARCHAR(100)&lt;br&gt;- mobile : VARCHAR(15)&lt;br&gt;- role : INT&lt;br&gt;- login_type : VARCHAR(20)&lt;br&gt;- reset_otp : VARCHAR(6)&lt;br&gt;- reset_otp_expiry : DATETIME&lt;br&gt;- status : INT&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ login() : boolean&lt;br&gt;+ register() : boolean&lt;br&gt;+ logout() : void&lt;br&gt;+ resetPassword(otp) : boolean&lt;br&gt;+ updateProfile() : boolean&lt;br&gt;+ getCart() : Cart&lt;br&gt;+ getOrders() : List&amp;lt;DonHang&amp;gt;&lt;br&gt;+ isAdmin() : boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="40" y="340" width="200" height="320" as="geometry" />
        </mxCell>
        
        <!-- CLASS: Voucher -->
        <mxCell id="voucher-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;Voucher&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- ma_voucher : VARCHAR(50)&lt;br&gt;- ten_voucher : VARCHAR(200)&lt;br&gt;- mo_ta : TEXT&lt;br&gt;- loai_giam : ENUM&lt;br&gt;- gia_tri_giam : DECIMAL(10,2)&lt;br&gt;- giam_toi_da : DECIMAL(10,2)&lt;br&gt;- don_toi_thieu : DECIMAL(10,2)&lt;br&gt;- ap_dung_cho : ENUM&lt;br&gt;- so_luong : INT&lt;br&gt;- da_su_dung : INT&lt;br&gt;- gioi_han_moi_user : INT&lt;br&gt;- ngay_bat_dau : DATETIME&lt;br&gt;- ngay_het_han : DATETIME&lt;br&gt;- trang_thai : TINYINT&lt;br&gt;- created_at : TIMESTAMP&lt;br&gt;- updated_at : TIMESTAMP&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ isValid() : boolean&lt;br&gt;+ canUserUse(userId) : boolean&lt;br&gt;+ calculateDiscount(amount) : DECIMAL&lt;br&gt;+ applyVoucher() : boolean&lt;br&gt;+ getUsageCount() : INT&lt;br&gt;+ getRemainingQuantity() : INT&lt;br&gt;+ isExpired() : boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="210" height="440" as="geometry" />
        </mxCell>
        
        <!-- CLASS: VoucherUsage -->
        <mxCell id="voucher-usage-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;VoucherUsage&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- voucher_id : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- user_id : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- donhang_id : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- ma_donhang : VARCHAR(50)&lt;br&gt;- gia_tri_don_hang : DECIMAL(10,2)&lt;br&gt;- gia_tri_giam : DECIMAL(10,2)&lt;br&gt;- ngay_su_dung : TIMESTAMP&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ recordUsage() : boolean&lt;br&gt;+ getUsageHistory(userId) : List&lt;br&gt;+ validateUsage() : boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="300" y="80" width="210" height="260" as="geometry" />
        </mxCell>
        
        <!-- CLASS: DonHang -->
        <mxCell id="donhang-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;DonHang&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- iduser : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- voucher_id : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- ma_voucher : VARCHAR(50)&lt;br&gt;- gia_tri_giam : DECIMAL(10,2)&lt;br&gt;- tong_truoc_giam : DECIMAL(10,2)&lt;br&gt;- diachi : TEXT&lt;br&gt;- sodienthoai : VARCHAR(255)&lt;br&gt;- soluong : INT&lt;br&gt;- tongtien : VARCHAR(255)&lt;br&gt;- thoigian : DATETIME&lt;br&gt;- madonhang : VARCHAR(50)&lt;br&gt;- ngaydat : DATE&lt;br&gt;- ngaygiaodukien : DATE&lt;br&gt;- trangthai : VARCHAR(50)&lt;br&gt;- vnpay_transaction_no : VARCHAR(50)&lt;br&gt;- vnpay_bank_code : VARCHAR(20)&lt;br&gt;- vnpay_pay_date : VARCHAR(20)&lt;br&gt;- paypal_order_id : VARCHAR(100)&lt;br&gt;- paypal_payer_id : VARCHAR(100)&lt;br&gt;- paypal_payment_date : DATETIME&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ createOrder() : boolean&lt;br&gt;+ calculateTotal() : DECIMAL&lt;br&gt;+ applyVoucher(voucher) : boolean&lt;br&gt;+ updateStatus(status) : boolean&lt;br&gt;+ getOrderDetails() : List&lt;br&gt;+ cancelOrder() : boolean&lt;br&gt;+ confirmOrder() : boolean&lt;br&gt;+ getPaymentInfo() : String&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="560" y="80" width="220" height="500" as="geometry" />
        </mxCell>
        
        <!-- CLASS: ChiTietDonHang -->
        <mxCell id="chitiet-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;ChiTietDonHang&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- iddonhang : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- idsp : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- soluong : INT&lt;br&gt;- gia : DECIMAL(10,2)&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ calculateSubtotal() : DECIMAL&lt;br&gt;+ getProduct() : SanPhamMoi&lt;br&gt;+ updateQuantity(qty) : boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="560" y="620" width="200" height="200" as="geometry" />
        </mxCell>
        
        <!-- CLASS: SanPhamMoi -->
        <mxCell id="sanpham-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;SanPhamMoi&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- tensp : VARCHAR(100)&lt;br&gt;- hinhanh : TEXT&lt;br&gt;- mota : TEXT&lt;br&gt;- giasp : DECIMAL(10,2)&lt;br&gt;- loai : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- soluongtonkho : INT&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ getDetails() : SanPhamMoi&lt;br&gt;+ updatePrice(price) : boolean&lt;br&gt;+ updateStock(quantity) : boolean&lt;br&gt;+ isAvailable() : boolean&lt;br&gt;+ getByCategory(loai) : List&lt;br&gt;+ searchProducts(keyword) : List&lt;br&gt;+ decreaseStock(qty) : boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="300" y="400" width="200" height="280" as="geometry" />
        </mxCell>
        
        <!-- CLASS: Cart -->
        <mxCell id="cart-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;Cart&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- iduser : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- created_at : TIMESTAMP&lt;br&gt;- updated_at : TIMESTAMP&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ getItems() : List&amp;lt;CartItem&amp;gt;&lt;br&gt;+ getTotal() : DECIMAL&lt;br&gt;+ getItemCount() : INT&lt;br&gt;+ clear() : void&lt;br&gt;+ addItem(product, qty) : boolean&lt;br&gt;+ removeItem(itemId) : boolean&lt;br&gt;+ updateItemQuantity(id, qty) : boolean&lt;br&gt;+ checkout() : DonHang&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="40" y="700" width="210" height="260" as="geometry" />
        </mxCell>
        
        <!-- CLASS: CartItem -->
        <mxCell id="cartitem-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;CartItem&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- idcart : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- idsp : INT &amp;lt;&amp;lt;FK&amp;gt;&amp;gt;&lt;br&gt;- soluong : INT&lt;br&gt;- giasp : DECIMAL(10,2)&lt;br&gt;- created_at : TIMESTAMP&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ increaseQty(qty) : void&lt;br&gt;+ decreaseQty(qty) : void&lt;br&gt;+ getSubtotal() : DECIMAL&lt;br&gt;+ getProduct() : SanPhamMoi&lt;br&gt;+ updateQuantity(qty) : boolean&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="300" y="720" width="200" height="220" as="geometry" />
        </mxCell>
        
        <!-- CLASS: LoaiSanPham -->
        <mxCell id="loaisp-class" value="&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;&#34;&gt;&lt;b&gt;LoaiSanPham&lt;/b&gt;&lt;/p&gt;&lt;p style=&#34;margin:0px;margin-top:4px;text-align:center;font-size:10px;font-style:italic;&#34;&gt;&amp;lt;&amp;lt;Entity&amp;gt;&amp;gt;&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;- id : INT &amp;lt;&amp;lt;PK&amp;gt;&amp;gt;&lt;br&gt;- tenloai : VARCHAR(100)&lt;br&gt;- mota : TEXT&lt;br&gt;- hinhanh : TEXT&lt;/p&gt;&lt;hr size=&#34;1&#34;/&gt;&lt;p style=&#34;margin:0px;margin-left:4px;font-size:11px;&#34;&gt;+ getProducts() : List&amp;lt;SanPhamMoi&amp;gt;&lt;br&gt;+ create() : boolean&lt;br&gt;+ update() : boolean&lt;br&gt;+ delete() : boolean&lt;br&gt;+ getAll() : List&amp;lt;LoaiSanPham&amp;gt;&lt;/p&gt;" style="verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Arial;html=1;whiteSpace=wrap;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="560" y="860" width="200" height="200" as="geometry" />
        </mxCell>
        
        <!-- RELATIONSHIPS -->
        
        <!-- User owns Cart (1:0..1) -->
        <mxCell id="rel-user-cart" value="owns" style="endArrow=open;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1" source="user-class" target="cart-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-user-cart-1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="150" y="665" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-user-cart-2" value="0..1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="150" y="700" width="30" height="20" as="geometry" />
        </mxCell>
        
        <!-- Cart contains CartItem (1:*) - Composition -->
        <mxCell id="rel-cart-cartitem" value="contains" style="endArrow=open;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;startArrow=diamondThin;startFill=1;" edge="1" parent="1" source="cart-class" target="cartitem-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-cart-cartitem-1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="255" y="810" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-cart-cartitem-2" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="290" y="810" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- CartItem references SanPhamMoi (*:1) -->
        <mxCell id="rel-cartitem-sanpham" value="references" style="endArrow=open;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1" source="cartitem-class" target="sanpham-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-cartitem-sanpham-1" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="410" y="695" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-cartitem-sanpham-2" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="410" y="680" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- User places DonHang (1:*) -->
        <mxCell id="rel-user-donhang" value="places" style="endArrow=open;html=1;rounded=0;exitX=1;exitY=0.2;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="240" y="404" as="sourcePoint" />
            <mxPoint x="560" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rel-user-donhang-1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="250" y="384" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-user-donhang-2" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="540" y="210" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- DonHang contains ChiTietDonHang (1:*) - Composition -->
        <mxCell id="rel-donhang-chitiet" value="contains" style="endArrow=open;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;startArrow=diamondThin;startFill=1;" edge="1" parent="1" source="donhang-class" target="chitiet-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-donhang-chitiet-1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="680" y="585" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-donhang-chitiet-2" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="680" y="605" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- ChiTietDonHang includes SanPhamMoi (*:1) -->
        <mxCell id="rel-chitiet-sanpham" value="includes" style="endArrow=open;html=1;rounded=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.7;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1" source="chitiet-class" target="sanpham-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-chitiet-sanpham-1" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="540" y="700" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-chitiet-sanpham-2" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="510" y="580" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- DonHang uses Voucher (*:0..1) -->
        <mxCell id="rel-donhang-voucher" value="uses" style="endArrow=open;html=1;rounded=0;exitX=0;exitY=0.2;exitDx=0;exitDy=0;entryX=1;entryY=0.3;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1" source="donhang-class" target="voucher-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-donhang-voucher-1" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="540" y="160" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-donhang-voucher-2" value="0..1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="260" y="200" width="30" height="20" as="geometry" />
        </mxCell>
        
        <!-- Voucher tracked by VoucherUsage (1:*) -->
        <mxCell id="rel-voucher-usage" value="tracked by" style="endArrow=open;html=1;rounded=0;exitX=1;exitY=0.2;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1" source="voucher-class" target="voucher-usage-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-voucher-usage-1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="255" y="148" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-voucher-usage-2" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="290" y="148" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- VoucherUsage applied to DonHang (*:0..1) -->
        <mxCell id="rel-usage-donhang" value="applied to" style="endArrow=open;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.4;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1" source="voucher-usage-class" target="donhang-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-usage-donhang-1" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="515" y="190" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-usage-donhang-2" value="0..1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="540" y="270" width="30" height="20" as="geometry" />
        </mxCell>
        
        <!-- LoaiSanPham categorizes SanPhamMoi (1:*) -->
        <mxCell id="rel-loai-sanpham" value="categorizes" style="endArrow=open;html=1;rounded=0;exitX=0;exitY=0.3;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1" source="loaisp-class" target="sanpham-class">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="rel-loai-sanpham-1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="540" y="910" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-loai-sanpham-2" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="510" y="660" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- User has VoucherUsage (1:*) -->
        <mxCell id="rel-user-voucherusage" value="has" style="endArrow=open;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.8;entryDx=0;entryDy=0;strokeColor=#000000;fontColor=#000000;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="140" y="340" as="sourcePoint" />
            <mxPoint x="300" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="rel-user-voucherusage-1" value="1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="145" y="315" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="rel-user-voucherusage-2" value="*" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="280" y="260" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- LEGEND -->
        <mxCell id="legend-box" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="820" y="620" width="180" height="200" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="CHÚ GIẢI" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="870" y="625" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-1" value="&lt;&lt;PK&gt;&gt; : Primary Key" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="650" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-2" value="&lt;&lt;FK&gt;&gt; : Foreign Key" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="670" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-3" value="&lt;&lt;Entity&gt;&gt; : Entity Class" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="690" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-4" value="1 -- 1 : Association 1:1" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="710" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-5" value="1 -- * : Association 1:N" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="730" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-6" value="◆-- : Composition" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="750" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-7" value="- : Private attribute" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="770" width="160" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend-8" value="+ : Public method" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="830" y="790" width="160" height="20" as="geometry" />
        </mxCell>
        
        <!-- Footer -->
        <mxCell id="footer" value="Cập nhật: 01/12/2025 | Database: appbandienthoai | Chuẩn UML 2.0" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="400" y="1080" width="400" height="20" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
